<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>献立アシスタント</title>
  <style>
    button { margin: 5px; padding: 10px; }
    .selected { background-color: lightgreen; }
    img { max-width: 300px; margin-top: 10px; border-radius: 8px; box-shadow: 2px 2px 6px rgba(0,0,0,0.2); }
    .recipe-box { background: #f9f9f9; padding: 10px; border-radius: 8px; margin-top: 10px; }
    ul { padding-left: 20px; }
  </style>
</head>
<body>
  <h2>献立アシスタント</h2>
  <p>材料を選んでください（複数可）:</p>

  <!-- 材料ボタン -->
  <button onclick="toggleIngredient('鶏むね肉', this)">鶏むね肉</button>
  <button onclick="toggleIngredient('豚肉', this)">豚肉</button>
  <button onclick="toggleIngredient('牛肉', this)">牛肉</button>
  <button onclick="toggleIngredient('玉ねぎ', this)">玉ねぎ</button>
  <button onclick="toggleIngredient('じゃがいも', this)">じゃがいも</button>
  <button onclick="toggleIngredient('にんじん', this)">にんじん</button>
  <button onclick="toggleIngredient('ほうれん草', this)">ほうれん草</button>
  <button onclick="toggleIngredient('キャベツ', this)">キャベツ</button>
  <button onclick="toggleIngredient('トマト', this)">トマト</button>
  <button onclick="toggleIngredient('卵', this)">卵</button>

  <br><br>
  <button onclick="showRecipe()">おすすめ料理を表示</button>

  <h3>おすすめ料理</h3>
  <pre id="result"></pre>
  <div id="imageContainer"></div>
  <div id="recipeBox" class="recipe-box"></div>

  <script>
    let selectedIngredients = [];

    function toggleIngredient(ingredient, btn) {
      const index = selectedIngredients.indexOf(ingredient);
      if (index === -1) {
        selectedIngredients.push(ingredient);
        btn.classList.add("selected");
      } else {
        selectedIngredients.splice(index, 1);
        btn.classList.remove("selected");
      }
    }

    function showRecipe() {
      let recipeName = "レシピが見つかりません";
      let image = "";
      let instructions = [];

      const has = (ing) => selectedIngredients.includes(ing);

      // 優先ルール
      if (has("豚肉") && has("じゃがいも") && has("玉ねぎ") && has("にんじん")) {
        recipeName = "カレーライス";
        image = "https://example.com/curry.jpg";
        instructions = [
          "材料を切る",
          "豚肉と野菜を炒める",
          "水とルーを入れて煮込む",
          "ご飯にかけて完成！"
        ];
      } else if (has("牛肉") && has("玉ねぎ")) {
        recipeName = "牛丼";
        image = "https://example.com/gyudon.jpg";
        instructions = [
          "玉ねぎを薄切りにする",
          "鍋に出汁・醤油・砂糖を入れて煮る",
          "牛肉と玉ねぎを煮込む",
          "ご飯にのせて完成！"
        ];
      } else if (has("卵") && has("トマト")) {
        recipeName = "トマトと卵の炒め物";
        image = "https://example.com/tomatoegg.jpg";
        instructions = [
          "トマトを切る",
          "卵を溶いて炒める",
          "トマトを加えて炒め合わせる",
          "塩胡椒で味付けして完成！"
        ];
      } else if (has("鶏むね肉") && has("玉ねぎ")) {
        recipeName = "親子丼";
        image = "https://example.com/oyakodon.jpg";
        instructions = [
          "玉ねぎを薄切りにする",
          "鶏肉を一口大に切る",
          "出汁と調味料で鶏肉と玉ねぎを煮る",
          "溶き卵を回し入れて完成！"
        ];
      } else {
        // 単品レシピ
        const singleRecipes = {
          "鶏むね肉": ["鶏むね肉の照り焼き", "https://example.com/chicken.jpg", [
            "鶏むね肉を切る",
            "醤油・みりんで炒める",
            "照りが出たら完成！"
          ]],
          "豚肉": ["豚の生姜焼き", "https://example.com/pork.jpg", [
            "豚肉を切る",
            "生姜と醤油で炒める",
            "火が通ったら完成！"
          ]],
          "玉ねぎ": ["オニオンスープ", "https://example.com/onionsoup.jpg", [
            "玉ねぎを炒める",
            "水とコンソメを入れて煮る",
            "塩胡椒で味を整えて完成！"
          ]],
          "卵": ["卵焼き", "https://example.com/tamagoyaki.jpg", [
            "卵を溶く",
            "砂糖と醤油を混ぜる",
            "卵焼き器で焼いて完成！"
          ]]
        };

        for (let i of selectedIngredients) {
          if (singleRecipes[i]) {
            [recipeName, image, instructions] = singleRecipes[i];
            break;
          }
        }
      }

      // 表示処理
      document.getElementById("result").textContent =
        "選んだ材料: " + (selectedIngredients.join("、") || "なし") + "\n" +
        "おすすめ料理: " + recipeName;

      document.getElementById("imageContainer").innerHTML = image
        ? `<img src="${image}" alt="${recipeName}">`
        : "";

      if (instructions.length > 0) {
        document.getElementById("recipeBox").innerHTML =
          "<b>【作り方】</b><ul>" +
          instructions.map(step => `<li>${step}</li>`).join("") +
          "</ul>";
      } else {
        document.getElementById("recipeBox").innerHTML = "";
      }
    }
  </script>
</body>
</html>
