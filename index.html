<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>献立アシスタント</title>
  <style>
    button { margin: 5px; padding: 10px; }
    .selected { background-color: lightgreen; }
    img { max-width: 300px; margin-top: 10px; border-radius: 8px; box-shadow: 2px 2px 6px rgba(0,0,0,0.2); }
  </style>
</head>
<body>
  <h2>献立アシスタント</h2>
  <p>材料を選んでください（複数可）:</p>

  <!-- 材料ボタン -->
  <button onclick="toggleIngredient('鶏むね肉', this)">鶏むね肉</button>
  <button onclick="toggleIngredient('豚肉', this)">豚肉</button>
  <button onclick="toggleIngredient('牛肉', this)">牛肉</button>
  <button onclick="toggleIngredient('玉ねぎ', this)">玉ねぎ</button>
  <button onclick="toggleIngredient('じゃがいも', this)">じゃがいも</button>
  <button onclick="toggleIngredient('にんじん', this)">にんじん</button>
  <button onclick="toggleIngredient('ほうれん草', this)">ほうれん草</button>
  <button onclick="toggleIngredient('キャベツ', this)">キャベツ</button>
  <button onclick="toggleIngredient('トマト', this)">トマト</button>
  <button onclick="toggleIngredient('卵', this)">卵</button>

  <br><br>
  <button onclick="showRecipe()">おすすめ料理を表示</button>

  <h3>おすすめ料理</h3>
  <pre id="result"></pre>
  <div id="imageContainer"></div>

  <script>
    let selectedIngredients = [];

    function toggleIngredient(ingredient, btn) {
      const index = selectedIngredients.indexOf(ingredient);
      if (index === -1) {
        selectedIngredients.push(ingredient);
        btn.classList.add("selected");
      } else {
        selectedIngredients.splice(index, 1);
        btn.classList.remove("selected");
      }
    }

    function showRecipe() {
      let recipe = "レシピが見つかりません";
      let image = "";

      const has = (ing) => selectedIngredients.includes(ing);

      // 優先順位つきのルール
      if (has("豚肉") && has("じゃがいも") && has("玉ねぎ") && has("にんじん")) {
        recipe = "カレーライス";
        image = "https://example.com/curry.jpg";
      } else if (has("牛肉") && has("玉ねぎ")) {
        recipe = "牛丼";
        image = "https://example.com/gyudon.jpg";
      } else if (has("卵") && has("トマト")) {
        recipe = "トマトと卵の炒め物";
        image = "https://example.com/tomatoegg.jpg";
      } else if (has("鶏むね肉") && has("玉ねぎ")) {
        recipe = "親子丼";
        image = "https://example.com/oyakodon.jpg";
      } else if (has("豚肉") && has("キャベツ")) {
        recipe = "回鍋肉（ホイコーロー）";
        image = "https://example.com/hoikoro.jpg";
      } else {
        // 単品レシピ（fallback）
        const singleRecipes = {
          "鶏むね肉": ["鶏むね肉の照り焼き", "https://example.com/chicken.jpg"],
          "豚肉": ["豚の生姜焼き", "https://example.com/pork.jpg"],
          "牛肉": ["牛丼", "https://example.com/gyudon.jpg"],
          "玉ねぎ": ["オニオンスープ", "https://example.com/onionsoup.jpg"],
          "じゃがいも": ["ポテトサラダ", "https://example.com/potatosalad.jpg"],
          "にんじん": ["にんじんのきんぴら", "https://example.com/carrot.jpg"],
          "ほうれん草": ["ほうれん草の胡麻和え", "https://example.com/spinach.jpg"],
          "キャベツ": ["キャベツの千切りサラダ", "https://example.com/cabbage.jpg"],
          "トマト": ["カプレーゼ", "https://example.com/caprese.jpg"],
          "卵": ["卵焼き", "https://example.com/tamagoyaki.jpg"]
        };

        for (let i of selectedIngredients) {
          if (singleRecipes[i]) {
            [recipe, image] = singleRecipes[i];
            break;
          }
        }
      }

      document.getElementById("result").textContent =
        "選んだ材料: " + (selectedIngredients.join("、") || "なし") + "\n" +
        "おすすめ料理: " + recipe;

      document.getElementById("imageContainer").innerHTML = image
        ? `<img src="${image}" alt="${recipe}">`
        : "";
    }
  </script>
</body>
</html>
